# Database Configuration - Bolna.ai Migration Database
DATABASE_URL=postgresql://your_username:your_password@your-host.neon.tech/your_database?sslmode=require&channel_binding=require

# Bolna.ai API Configuration
BOLNA_API_KEY=your_bolna_api_key_here
BOLNA_WEBHOOK_SECRET=your_bolna_webhook_secret_here
BOLNA_BASE_URL=https://api.bolna.ai

# Twilio Recording Authentication
# Auth token for accessing Twilio recording URLs (international calls via Bolna)
# The Account SID is extracted from the recording URL itself
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here

# Plivo Dialer (Browser SDK v2) - Phase 1
PLIVO_AUTH_ID=your_plivo_auth_id
PLIVO_AUTH_TOKEN=your_plivo_auth_token
PLIVO_APP_ID=your_plivo_xml_application_id
PLIVO_NUMBER=your_plivo_purchased_number_digits_only
PLIVO_ENDPOINT_USERNAME=your_plivo_endpoint_username
# Short-lived token TTL (seconds). Recommended: 300-1800.
PLIVO_TOKEN_TTL_SECONDS=900

# OpenAI Response API Configuration
# Get your API key from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxx...

# OpenAI Prompt IDs (create in https://platform.openai.com/prompts)
# Individual Analysis: Extracts data from single call transcript
OPENAI_INDIVIDUAL_PROMPT_ID=pmpt_68de2bd80fa08196ab95184e7787c6e30c231f4a29f082a0

# Complete Analysis: Aggregates insights across all historical calls
OPENAI_COMPLETE_PROMPT_ID=pmpt_abc123def456ghi789jkl012mno345pqr678stu901vwx234

# OpenAI API Configuration (optional overrides - usually set in prompt itself)
OPENAI_MODEL=gpt-4o-2024-08-06
OPENAI_TIMEOUT=30000

# Legacy ElevenLabs Configuration (for reference/rollback)
# ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
# ELEVENLABS_WEBHOOK_SECRET=your_elevenlabs_webhook_secret_here
# ELEVENLABS_BASE_URL=https://api.elevenlabs.io

# Stripe Payment Configuration
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret

# Email Configuration (ZeptoMail API)
# Get your API token from ZeptoMail dashboard
ZEPTOMAIL_API_URL=https://api.zeptomail.in/v1.1/email
ZEPTOMAIL_API_TOKEN=Zoho-enczapikey_YOUR_ENCODED_API_KEY_HERE
ZEPTOMAIL_FROM_EMAIL=noreply@sniperthink.com
ZEPTOMAIL_FROM_NAME=noreply
EMAIL_FROM=noreply@sniperthink.com

# Social Login Configuration
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
LINKEDIN_CLIENT_ID=your_linkedin_client_id
LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret

# Google Calendar Integration (OAuth 2.0)
# Get credentials from Google Cloud Console: https://console.cloud.google.com/apis/credentials
GOOGLE_CALENDAR_CLIENT_ID=your_google_calendar_oauth_client_id
GOOGLE_CALENDAR_CLIENT_SECRET=your_google_calendar_oauth_client_secret
GOOGLE_CALENDAR_REDIRECT_URI=http://localhost:3000/api/integrations/google/callback

# Chat Agent Server Configuration
# External microservice that receives Google Calendar tokens for AI meeting booking
# The main backend (port 3000) syncs tokens to this server after successful OAuth
# Format: http://hostname:port (without trailing slash)
# Example: http://localhost:4000 or https://chat-agent.example.com
# If not set, token sync will be skipped (main OAuth flow still works)
CHAT_AGENT_SERVER_URL=http://localhost:4000

# Application Configuration
NODE_ENV=development
PORT=3000
HOST=localhost

# Backend URL (REQUIRED for email tracking)
# This is the public URL where your backend is deployed
# Email tracking pixels and links use this URL to redirect to your server
# Example: https://api.yourdomain.com or https://your-app.onrender.com
BACKEND_URL=https://your-deployed-backend-url.com

# Call Campaign Configuration
# System-wide concurrent call limit (applies to ALL users combined)
# This prevents system overload by limiting total concurrent calls across all campaigns
SYSTEM_CONCURRENT_CALLS_LIMIT=10

# Default per-user concurrent call limit (used when user.concurrent_calls_limit is NULL)
# Individual users can have custom limits set in the database
DEFAULT_USER_CONCURRENT_CALLS_LIMIT=2

# Queue processor interval (in milliseconds)
# How often the queue processor checks for new calls to initiate
QUEUE_PROCESSOR_INTERVAL=10000

# Connection Pool Configuration
# Maximum connections allowed in the pool (Neon supports up to 100)
MAX_POOL_CONNECTIONS=100
# Base connections to maintain when campaigns or users are active
POOL_BASE_CONNECTIONS=11

# Frontend Configuration
# Add your production website URL here
FRONTEND_URL=http://localhost:8080
WEBHOOK_BASE_URL=http://localhost:3000

# CORS Configuration
# Add your production website URL here to avoid CORS errors
CORS_ORIGIN=http://localhost:8080
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin,X-CSRF-Token

# Security Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
SESSION_SECRET=your-session-secret-key-change-this

# API Configuration
API_RATE_LIMIT=1000
API_TIMEOUT=30000

# Logging Configuration
# All logs output to console for Railway/platform log capture (no file-based logging)
# LOG_LEVEL: Controls which log levels are displayed (ERROR, WARN, INFO, DEBUG)
#   - ERROR: Only errors
#   - WARN: Errors and warnings  
#   - INFO: Errors, warnings, and info (recommended for production)
#   - DEBUG: All messages including debug (verbose)
LOG_LEVEL=debug
# DEBUG_MODE: When true, enables verbose debug logging
DEBUG_MODE=true
# ENABLE_REQUEST_LOGGING: When true, logs HTTP requests (method, url, status, duration)
ENABLE_REQUEST_LOGGING=true

## Serverless/Platform Configuration
# Set to true on serverless platforms (Railway) to allow DB pool to drain after inactivity
SERVERLESS=true

## Campaign Scheduler Configuration (In-Memory Smart Scheduling)
# Replaces polling queue processor to reduce Neon database compute hours
# The scheduler calculates when to wake database based on campaign windows
# Database sleeps between scheduled wake times (60-70% compute savings)
ENABLE_IN_MEMORY_SCHEDULER=true

# Scheduled Tasks
# Globally enable/disable background scheduled tasks (email reminders, credit checks, etc.)
# If explicitly set to false, disables all tasks regardless of per-task flags.
# If unset, per-task flags decide; defaults are safe for serverless.
# ENABLE_SCHEDULED_TASKS=false

# Per-task toggles (granular control)
# Cloudflare R2 Configuration (for WhatsApp template media storage)
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key
R2_SECRET_ACCESS_KEY=your_r2_secret_key
R2_BUCKET_NAME=calling-agent
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev

# WhatsApp Microservice Configuration
CHAT_AGENT_SERVER_URL=http://localhost:4000

# Email verification reminders
EMAIL_VERIFICATION_REMINDER_ENABLED=false
EMAIL_VERIFICATION_REMINDER_RUN_ON_STARTUP=false

# Low credits notifications (daily sweep)
LOW_CREDITS_NOTIFICATIONS_ENABLED=false
LOW_CREDITS_NOTIFICATIONS_RUN_ON_STARTUP=false

# Event-driven email toggles
# Send an email to the user when credits are added (admin adjustment or purchase)
EMAIL_CREDITS_ADDED_ENABLED=true

# Send a campaign summary email when a campaign completes (best-effort, event-driven)
# Includes top hot leads inline and attaches a CSV if available
EMAIL_CAMPAIGN_SUMMARY_ENABLED=false

# Send meeting booked notification to dashboard user when AI agent books a meeting
# Includes full call context: transcript, recording, AI analysis, lead details
EMAIL_MEETING_BOOKED_NOTIFICATIONS_ENABLED=true